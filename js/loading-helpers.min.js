class LoadingManager{constructor(){this.activeLoaders=new Set();}show(element,options={}){const el=typeof element==='string' ? document.querySelector(element): element;if(!el)return;const{type='spinner',text='Laster...',preserveSize=true}=options;const loaderId=`loader-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;this.activeLoaders.add({element: el,originalContent: el.innerHTML,originalClasses: el.className,loaderId});if(preserveSize){el.style.minHeight=el.offsetHeight+'px';el.style.minWidth=el.offsetWidth+'px';}el.classList.add('loading');el.setAttribute('aria-busy','true');el.setAttribute('aria-label',text);switch(type){case 'spinner': el.innerHTML=this.createSpinner(text);break;case 'skeleton': el.innerHTML=this.createSkeleton();break;case 'overlay': el.style.position='relative';el.appendChild(this.createOverlay(text));break;}return loaderId;}hide(element){const el=typeof element==='string' ? document.querySelector(element): element;if(!el)return;const loaderData=Array.from(this.activeLoaders).find(loader=>loader.element===el);if(loaderData){el.innerHTML=loaderData.originalContent;el.className=loaderData.originalClasses;el.removeAttribute('aria-busy');el.removeAttribute('aria-label');el.style.minHeight='';el.style.minWidth='';const overlay=el.querySelector('.loading-overlay');if(overlay){overlay.remove();}this.activeLoaders.delete(loaderData);}}createSpinner(text){return `<div class="loading-spinner" role="status" aria-label="${text}"><div class="spinner"></div><span class="loading-text">${text}</span></div>`;}createSkeleton(){return `<div class="skeleton-container"><div class="skeleton skeleton-line"></div><div class="skeleton skeleton-line" style="width: 80%;"></div><div class="skeleton skeleton-line" style="width: 60%;"></div></div>`;}createOverlay(text){const overlay=document.createElement('div');overlay.className='loading-overlay';overlay.innerHTML=`<div class="loading-spinner" role="status" aria-label="${text}"><div class="spinner"></div><span class="loading-text">${text}</span></div>`;return overlay;}async trackPromise(promise,element,options={}){const loaderId=this.show(element,options);try{const result=await promise;this.hide(element);return result;}catch(error){this.hide(element);throw error;}}}const loadingCSS=` .loading-spinner{display: flex;flex-direction: column;align-items: center;justify-content: center;gap: var(--space-2);padding: var(--space-4);}.spinner{width: 32px;height: 32px;border: 3px solid var(--border-color);border-top: 3px solid var(--primary);border-radius: 50%;animation: spin 1s linear infinite;}.loading-text{color: var(--text-secondary);font-size: var(--font-size-sm);}.loading-overlay{position: absolute;top: 0;left: 0;right: 0;bottom: 0;background: rgba(0,0,0,0.5);backdrop-filter: blur(2px);display: flex;align-items: center;justify-content: center;z-index: 10;border-radius: inherit;}.skeleton-container{padding: var(--space-2);}.skeleton-line{height: 16px;margin-bottom: var(--space-1);}.skeleton-line:last-child{margin-bottom: 0;}@keyframes spin{0%{transform: rotate(0deg);}100%{transform: rotate(360deg);}}@media(prefers-reduced-motion: reduce){.spinner{animation: none;border-top: 3px solid var(--primary);}}`;if(!document.querySelector('#loading-styles')){const style=document.createElement('style');style.id='loading-styles';style.textContent=loadingCSS;document.head.appendChild(style);}const LoadingHelper=new LoadingManager();if(typeof module!=='undefined'&&module.exports){module.exports=LoadingHelper;}else{window.LoadingHelper=LoadingHelper;}