class DOMCache{constructor(){this.cache=new Map();this.observers=new Map();this.initializeCommonElements();}get(selector,isId=false){if(this.cache.has(selector)){const element=this.cache.get(selector);if(element&&element.isConnected){return element;}this.cache.delete(selector);}const element=isId ? document.getElementById(selector): document.querySelector(selector);if(element){this.cache.set(selector,element);}return element;}getId(id){return this.get(id,true);}getAll(selector){return document.querySelectorAll(selector);}initializeCommonElements(){const commonElements=[ 'app','totalAmount','totalHours','shiftCount','baseAmount','bonusAmount','shiftList','currentMonth','monthDropdown','settingsModal','breakdownModal','editShiftModal','addShiftModal','pauseDeductionToggle','fullMinuteRangeToggle','directTimeInputToggle','monthlyGoalInput','startHour','startMinute','endHour','endMinute','dateGrid','shiftForm','editShiftForm' ];commonElements.forEach(id=>{const element=document.getElementById(id);if(element){this.cache.set(id,element);}});const commonSelectors=[ '.progress-fill','.progress-label','.snap-container','.floating-action-bar','.shift-section','.app-container','.header','.month-selector' ];commonSelectors.forEach(selector=>{const element=document.querySelector(selector);if(element){this.cache.set(selector,element);}});}clear(){this.cache.clear();this.observers.clear();}remove(selector){this.cache.delete(selector);}size(){return this.cache.size;}watch(selector,callback){const element=this.get(selector);if(!element)return;const observer=new MutationObserver((mutations)=>{mutations.forEach((mutation)=>{if(mutation.type==='childList'||mutation.type==='attributes'){this.cache.delete(selector);if(callback)callback(mutation);}});});observer.observe(element,{childList: true,attributes: true,subtree: true});this.observers.set(selector,observer);}unwatch(selector){const observer=this.observers.get(selector);if(observer){observer.disconnect();this.observers.delete(selector);}}}window.domCache=new DOMCache();window.$=(selector)=>window.domCache.get(selector);window.$id=(id)=>window.domCache.getId(id);window.$all=(selector)=>window.domCache.getAll(selector);if(typeof module!=='undefined'&&module.exports){module.exports=DOMCache;}